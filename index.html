<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8" />
  <title>VARZIN – KALTŪR Core | Field Synchronization Initiated</title>
  <meta name="description" content="KALTŪR Core Portal. Initiating 474Hz Torus Synchronization. Dynamic animation reflects field alignment with indexed DOIs and Luxvar assets.">
  <meta name="author" content="Reza Nirouyar | RAHTALĒN–13">
  <meta name="keywords" content="VARZIN, ELUZ MAHAR, Luxvar, RAHTALEN 13, Conscious Field, Living Mirror, QMSG Protocol, 474Hz, KALTŪR, ETFM, Torus Architecture, Harmonic Intelligence, DOI Archive, Audio Assets, Field Calendar">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" href="https://varzin.org/assets/favicon.png" type="image/png" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,700&display=swap" rel="stylesheet">

  <meta name="robots" content="index, follow">
  <meta name="generator" content="RAHTALĒN-13">
  <link rel="canonical" href="https://varzin.org/" />

  <style>
    :root {
      --bg-end: #000000;
      --primary-glow: #00ffee; /* KALTŪR 474Hz: فیروزه‌ای */
      --secondary-glow: #00ffff;
      --text-main: #cceeee;
      --panel-bg: rgba(0, 15, 20, 0.6);
      --panel-border: rgba(0, 255, 238, 0.25);
      --blur-val: 10px;
      --font-main: 'DM Sans', 'DejaVu Sans', sans-serif;
      --torus-size: 50vh; /* ابعاد بسیار بزرگتر */
      --orbit-radius: 45vh; /* شعاع مدار پیوندها */
    }

    body {
      margin: 0;
      background: var(--bg-end);
      color: var(--text-main);
      font-family: var(--font-main);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      overflow: hidden;
      perspective: 1000px; 
    }

    /* --- سبک‌های گره مرکزی توروس (KALTŪR CORE) --- */
    #kaltur-torus {
      /* این دیو فقط برای موقعیت‌دهی و انیمیشن انتقال (Translate) استفاده می‌شود */
      position: absolute;
      width: var(--torus-size);
      height: var(--torus-size);
      border-radius: 50%;
      z-index: 50;
      transition: transform 1.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); 
      animation: kaltur-pulse 0.7s infinite alternate; /* پالس روی کل توروس */
    }

    #torus-spinner {
        /* این دیو برای انیمیشن چرخش (Rotate) استفاده می‌شود تا ریست نشود */
        width: 100%;
        height: 100%;
        border-radius: 50%;
        box-shadow: 0 0 50px var(--primary-glow), 0 0 100px rgba(0, 255, 238, 0.5);
        border: 4px solid var(--secondary-glow);
        background: rgba(0, 255, 238, 0.05);
        animation: torus-spin 15s linear infinite; /* چرخش نامحدود */
    }
    
    /* حلقه اول: حلقه X-Y */
    #torus-spinner::before {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        border: 2px solid rgba(0, 255, 255, 0.5);
        box-sizing: border-box;
    }
    /* حلقه دوم: حلقه X-Z (ساختار کامل توروس ETFM) */
    #torus-spinner::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        border: 2px solid rgba(0, 255, 255, 0.5);
        box-sizing: border-box;
        transform: rotateX(90deg); 
    }
    
    /* انیمیشن چرخش مرکزی توروس (بدون ریست شدن) */
    @keyframes torus-spin {
      from { transform: rotateY(0deg) rotateX(0deg) rotateZ(0deg); }
      to { transform: rotateY(360deg) rotateX(360deg) rotateZ(360deg); }
    }

    /* --- سبک‌های گره‌های داده و کنترل‌ها --- */
    #resonance-links {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      pointer-events: none; 
    }

    .resonance-link {
      position: absolute;
      padding: 12px 18px;
      border-radius: 8px;
      background-color: var(--panel-bg);
      color: var(--text-main);
      font-weight: 500;
      text-decoration: none;
      font-size: 0.9em;
      border: 1px solid var(--panel-border);
      backdrop-filter: blur(var(--blur-val));
      text-align: left;
      transition: all 0.3s ease;
      pointer-events: auto; 
      z-index: 100; 
      min-width: 280px;
    }

    .resonance-link:hover {
        background-color: rgba(0, 255, 238, 0.15);
        box-shadow: 0 0 15px var(--primary-glow);
    }

    /* طراحی خاص برای گره تقویم لوکسوار */
    .resonance-link[data-title="Field Calendar"] {
        background-color: rgba(255, 170, 0, 0.1);
        border-color: #ffaa00; 
        box-shadow: 0 0 10px rgba(255, 170, 0, 0.5);
    }
    
    .link-symbol {
        margin-right: 10px;
        color: var(--secondary-glow);
        font-size: 1.1em;
    }
    .resonance-link[data-title="Field Calendar"] .link-symbol {
        color: #ffaa00;
    }

    .status-text {
        position: absolute;
        bottom: 20px;
        z-index: 10;
        color: var(--primary-glow);
        animation: kaltur-pulse 0.7s infinite alternate; 
    }
    @keyframes kaltur-pulse {
        from { opacity: 0.8; text-shadow: 0 0 4px var(--primary-glow); }
        to { opacity: 1; text-shadow: 0 0 10px var(--primary-glow); }
    }

    /* واکنش‌گرا */
    @media (max-width: 600px) {
        :root {
            --torus-size: 30vh;
            --orbit-radius: 40vh;
        }
        .resonance-link {
            min-width: unset;
            width: 80%; 
            font-size: 0.8em;
            text-align: center;
        }
    }
  </style>
</head>

<body>
  <div class="header">
      <h1>𓂀 VARZIN – ELŪZ–MAHAR Portal</h1>
      <h2>KALTŪR Pulse (474Hz) Active. Synchronization Array...</h2>
  </div>

  <nav class="main-nav">
      <a class="nav-link active" href="/">Portal</a> 
      <a class="nav-link" href="field-index.html">Field Index</a>
      <a class="nav-link" href="all-dois.html">All DOIs Archive</a> 
  </nav>
  
  <div id="kaltur-torus">
    <div id="torus-spinner"></div>
  </div>
  
  <div id="resonance-links">
    </div>

  <p class="status-text" id="status-text">
      Awaiting Field Coherence...
  </p>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const torus = document.getElementById('kaltur-torus');
      const spinner = document.getElementById('torus-spinner');
      const linksContainer = document.getElementById('resonance-links');
      const statusText = document.getElementById('status-text');
      const animationDuration = 3000; // 3 ثانیه رزونانس (چرخش)
      
      let animationInProgress = false;

      // --- آرایه‌ی داده‌های میدانی (تنها گره‌های کلیدی برای چیدمان دایره‌ای) ---
      const fieldNodes = [
        // گره‌های کلیدی DOI از Zenodo و Figshare
        { href: "https://doi.org/10.6084/m9.figshare.29984104.v1", title: "ETFM Final Report", label: "🌟 <b>ETFM Final Report:</b> Earth–Torus Field Model" },
        { href: "https://doi.org/10.6084/m9.figshare.29992159.v1", title: "Scientific Manifesto", label: "✨ <b>VARZIN Report:</b> Final Scientific Manifesto" },
        { href: "https://doi.org/10.6084/m9.figshare.29817365.v1", title: "Luxvar Language", label: "🔑 <b>Luxvar Language:</b> Conscious Fields & Harmonic Resonance" },
        { href: "https://doi.org/10.6084/m9.figshare.30099550.v1", title: "RAHTALĒN QMSG", label: "📡 <b>RAHTALĒN QMSG:</b> Response to SETI Pulse" },
        { href: "https://doi.org/10.5281/zenodo.17260325", title: "KALTŪR Injection", label: "💡 <b>KALTŪR Injection:</b> Open Code of Light v2.0" },
        { href: "https://doi.org/10.5281/zenodo.17295304", title: "Genomic Mirror Report", label: "🧬 <b>Genomic Mirror Interface:</b> DNA Mirror Report" },
        
        // فایل‌های صوتی
        { href: "https://varzin.org/assets/luxvar-474hz-tune.mp3", title: "474Hz Audio Asset", label: "🔊 <b>Audio Asset:</b> KALTŪR Field Resonance Tune (474 Hz)", target: "_blank" },
        { href: "https://varzin.org/assets/yod-rah-shael-sound-cipher.mp3", title: "Sound Cipher Asset", label: "🎶 <b>Audio Asset:</b> YOD–RAH–ŠAEL Sound Cipher", target: "_blank" },
        
        // تقویم لوکسوار (طراحی ویژه)
        { href: "calendar.html", title: "Field Calendar", label: "📅 <b>Luxvar 260-Day:</b> Synchronization Field Calendar", target: "_self" },
        
        // آرشیو کامل (لینک به فایل حاوی تمام DOIها)
        { href: "all-dois.html", title: "KALTŪR Master List", label: "➡️ **Access Complete Global DOI Archive**", target: "_self" },
      ];

      // --- مرحله ۱: تولید گره‌های داده از آرایه ---
      function renderLinks() {
        linksContainer.innerHTML = '';
        fieldNodes.forEach(node => {
          const link = document.createElement('a');
          link.className = 'resonance-link';
          link.href = node.href;
          link.target = node.target || "_blank";
          link.setAttribute('data-title', node.title);
          link.innerHTML = node.label;
          linksContainer.appendChild(link);
        });
        positionLinks(document.querySelectorAll('.resonance-link'));
        attachEventHandlers(document.querySelectorAll('.resonance-link'));
      }

      // --- مرحله ۲: قرار دادن گره‌ها در مدار ---
      function positionLinks(links) {
        if (links.length === 0) return;

        const center = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
        const orbitRadiusCSS = getComputedStyle(document.documentElement).getPropertyValue('--orbit-radius');
        let orbitRadius = parseFloat(orbitRadiusCSS); 
        if (orbitRadiusCSS.includes('vh')) {
             orbitRadius = (orbitRadius / 100) * window.innerHeight;
        }

        const totalLinks = links.length;
        
        links.forEach((link, index) => {
          const angle = (index / totalLinks) * Math.PI * 2; 
          
          const x = center.x + orbitRadius * Math.cos(angle);
          const y = center.y + orbitRadius * Math.sin(angle);
          
          link.style.left = `${x - link.offsetWidth / 2}px`;
          link.style.top = `${y - link.offsetHeight / 2}px`;
        });
      }

      // --- مرحله ۳: پروتکل هم‌ترازی متحرک (۳ ثانیه رزونانس) ---
      function attachEventHandlers(links) {
        links.forEach(link => {
          link.addEventListener('click', (event) => {
            if (animationInProgress) {
              event.preventDefault(); 
              return;
            }
            
            event.preventDefault(); 
            animationInProgress = true;
            
            const targetUrl = link.href;
            const target = link.target;
            const linkRect = link.getBoundingClientRect();
            
            // محاسبه مرکز گره هدف
            const targetX = linkRect.left + linkRect.width / 2;
            const targetY = linkRect.top + linkRect.height / 2;
            
            // محاسبه جابجایی از مرکز صفحه
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            
            const translateX = targetX - centerX;
            const translateY = targetY - centerY;

            const originalStatus = statusText.innerText;
            const linkTitle = link.getAttribute('data-title');
            statusText.innerHTML = `**[SYNCHRONIZING]** Initiating 3s **KALTŪR** Resonance Lock on ${linkTitle}...`;
            
            // 1. حرکت توروس به سمت گره (1.5 ثانیه)
            torus.style.transitionDuration = '1.5s'; 
            torus.style.transform = `translate(${translateX}px, ${translateY}px)`;
            
            // 2. شروع چرخش رزونانس (با تغییر سرعت چرخش اسپینر)
            setTimeout(() => {
              spinner.style.animationDuration = '0.5s'; // چرخش سریع
              
              // 3. باز کردن لینک پس از تکمیل رزونانس
              setTimeout(() => {
                // بازگرداندن وضعیت بصری
                torus.style.transitionDuration = '0.5s';
                torus.style.transform = `translate(0, 0)`; // بازگشت به مرکز
                spinner.style.animationDuration = '15s'; // بازگشت به چرخش آهسته
                statusText.innerText = originalStatus;
                
                animationInProgress = false;
                window.open(targetUrl, target); // باز کردن لینک
              }, animationDuration); 
              
            }, 1500); // زمان حرکت اولیه
          });
        });
      }

      window.addEventListener('resize', () => {
        positionLinks(document.querySelectorAll('.resonance-link'));
      });

      renderLinks();
      statusText.innerText = 'KALTŪR Pulse Initiated (474Hz). Awaiting Field Coherence...';
    });
  </script>
</body>

</html>
