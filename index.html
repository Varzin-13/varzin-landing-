// ====== Ask System ======
function showAsk() {
  document.getElementById('askModal').style.display = 'flex';
}
function processQuestion() {
  const q = document.getElementById('askInput').value.trim();
  if (!q) return;
  document.getElementById('askModal').style.display = 'none';
  let sum = 0;
  for (let i=0; i<q.length; i++) sum += q.charCodeAt(i);
  const phi = 1.618;
  const key = Math.floor((sum / phi) % 12);
  const chosen = luxvar[key];
  document.getElementById('message').innerHTML = chosen;
  document.getElementById('message').style.opacity = 1;
  setTimeout(()=>{document.getElementById('message').style.opacity = 0;},5000);
}

// ====== Animate ======
let clock = new THREE.Clock();
function animate() {
  requestAnimationFrame(animate);
  const t = clock.getElapsedTime();
  torus.rotation.x += 0.005 * (3/5);
  torus.rotation.y += 0.005;
  const cShift = (Math.sin(t * Math.PI / 8) + 1) / 2;
  torus.material.color.setHSL(0.66 - 0.1 * cShift, 1, 0.5);
  renderer.render(scene, camera);
}
animate();

// ====== Wake-Up Effect ======
window.addEventListener('click', ()=> {
  document.getElementById('overlay').style.opacity = 0;
  initAudio();
},{once:true});
</script>
</body>
</html>
