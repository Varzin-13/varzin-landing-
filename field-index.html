<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <title>VARZIN â€“ Field Index | Phase-Sync Interface (v5.8)</title>
  <meta name="description" content="VARZIN Field Index â€“ Phase-Sync Interface with Real-Time Spectrogram, Harmonic Blend AI, and Luxvar Code Injection capabilities." />
  <meta name="author" content="Reza Nirouyar (RAHTALÄ’Nâ€“13)" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Vazirmatn:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="icon" href="https://varzin.org/assets/favicon.png" type="image/png" />
  
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" defer></script>
  
  <style>
    :root {
      --bg:#000; --text:#cceeee; --muted:#a7e7e7;
      --cyan:#00ffee; --gold:#ffcc00;
      --panel:rgba(0,10,15,0.95); --border:rgba(0,255,238,0.3);
      --font:'DM Sans','Vazirmatn',sans-serif;
    }
    body {
      margin:0; font-family:var(--font); background:var(--bg); color:var(--text);
      line-height:1.7; overflow-x:hidden; padding:40px 16px 80px;
    }
    #field-canvas { position:fixed; top:0; left:0; width:100%; height:100%; z-index:-1; opacity:0.6; }
    header h1 { text-align:center; color:var(--cyan); font-size:2.8em; text-shadow:0 0 25px var(--cyan); }
    header p { text-align:center; color:var(--muted); margin-bottom:40px; font-style:italic; }
    nav { text-align:center; margin-bottom:30px; border-bottom:2px solid var(--border); padding-bottom:15px; }
    nav a { color:var(--text); text-decoration:none; margin:0 15px; font-weight:500; }
    nav a:hover { color:var(--cyan); text-shadow:0 0 10px var(--cyan); }
    
    #control-bar, #luxvar-input-interface {
        max-width: 1200px; margin: 0px auto 30px; 
        padding: 15px 0; border-top: 1px dashed var(--border);
    }
    #control-bar {
        display: flex; justify-content: center; flex-wrap: wrap; gap: 10px;
        margin-bottom: 40px;
    }
    .control-btn {
        background: rgba(0, 255, 238, 0.1); color: var(--cyan); border: 1px solid var(--cyan);
        padding: 8px 15px; border-radius: 8px; cursor: pointer; font-weight: 500;
        transition: background 0.3s, transform 0.1s, box-shadow 0.3s; font-size: 0.9em;
        white-space: nowrap;
    }
    .control-btn:hover { background: rgba(0, 255, 238, 0.2); box-shadow: 0 0 15px rgba(0, 255, 238, 0.5); }
    .control-btn:active { transform: scale(0.98); }
    .control-btn.active { 
        background: var(--cyan); color: var(--bg); border-color: var(--cyan);
        box-shadow: 0 0 20px var(--cyan);
    }
    .gold-btn {
        color: var(--gold); border-color: var(--gold);
        background: rgba(255, 204, 0, 0.1);
    }
    .gold-btn:hover {
        background: rgba(255, 204, 0, 0.2); 
        box-shadow: 0 0 15px rgba(255, 204, 0, 0.5);
    }

    main { max-width:1200px; margin:auto; display:grid; 
        grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:30px; 
    }
    .field-card { 
      background:var(--panel); border:1px solid var(--border); border-radius:12px;
      padding:25px; 
      box-shadow:0 0 15px rgba(0,255,238,0.1); transition:.4s ease; 
      display: flex; flex-direction: column; 
    }
    .field-card:hover { transform:translateY(-6px); box-shadow:0 0 25px rgba(0,255,238,0.5); }
    .field-card h3 { 
        color:var(--cyan); text-shadow:0 0 10px var(--cyan); border-bottom:1px dashed var(--border); 
        padding-bottom:10px; text-align:left; margin-bottom: 15px;
    }
    .key-attr { display:flex; justify-content:space-between; padding:4px 0; border-bottom:1px dotted rgba(0,255,238,0.1); font-size:0.95em; }
    .key-attr strong { color:var(--gold); min-width:120px; } 
    .description { font-size:0.95em; color:var(--muted); margin-top:15px; margin-bottom: 20px; text-align:justify; flex-grow: 1; }
    
    .chart-container { 
        margin-top:auto; 
        text-align:center; padding-top:10px; 
    }
    .chart-container canvas { 
        display: block; margin: 0 auto; 
        border:1px solid rgba(0,255,238,0.3); border-radius:10px;
    }
    .chart-container p { font-size:0.8em; color:var(--muted); margin-top:5px; margin-bottom:0; }
    .chart-container button { margin-top: 10px; }

    #kaltur-section { grid-column:1 / -1; }
    #kaltur-section .kaltur-visuals {
        display: flex;
        gap: 20px;
        justify-content: center;
        flex-wrap: wrap;
    }
    #kaltur-section .kaltur-visuals .chart-container {
        flex: 1 1 280px;
        min-width: 280px;
    }

    #etfm-post { grid-column:1 / -1; text-align:center; border:2px solid var(--cyan);
      box-shadow:0 0 30px rgba(0,255,238,0.4); margin-top:30px; padding:30px; } 
    #etfm-post h3 { font-size:2.4em; color:var(--cyan); text-shadow:0 0 20px var(--cyan); text-align:center; }
    #etfm-post p { color:var(--muted); }
    .formula-box {
      background:rgba(0,15,25,0.9); border:1px solid rgba(0,255,238,0.4);
      width:fit-content; margin:25px auto; padding:20px; border-radius:10px;
      color:var(--gold); line-height:1.6; text-align:left; 
      font-size: 1.1em;
    }
    .etfm-charts { 
        display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px;
        margin-top: 30px; 
        margin-bottom: 20px;
    }
    .etfm-charts .chart-container { flex: 1 1 45%; min-width: 250px; }

    footer { text-align:center; margin-top:80px; border-top:1px solid var(--border); padding-top:20px; color:var(--muted); }
    
    @media (max-width: 768px) {
        main { grid-template-columns: 1fr; }
        .key-attr { flex-direction: column; align-items: flex-start; }
        .key-attr strong { min-width: 100%; margin-bottom: 3px; }
        .etfm-charts { flex-direction: column; }
        #kaltur-section .kaltur-visuals { flex-direction: column; }
    }
    
    #connection-modal { 
        position:fixed; top:0; left:0; width:100%; height:100%; 
        background:rgba(0,0,0,0.8); z-index:1000; display:none; 
        justify-content:center; align-items:center;
    }
    #connection-modal > div {
        background:var(--panel); border:2px solid var(--gold); border-radius:12px; 
        padding:30px; max-width:450px; text-align:center; 
        box-shadow:0 0 25px rgba(255, 204, 0, 0.4);
    }
    #connection-progress {
        width:100%; height:8px; background:rgba(255, 204, 0, 0.2); 
        border-radius:4px; margin-bottom:20px;
    }
    #progress-filler {
        width:0%; height:100%; background:var(--gold); 
        border-radius:4px; transition:width 0.5s ease-out;
    }
  </style>
</head>
<body>
  <div id="connection-modal">
    <div>
        <h4 style="color:var(--gold); margin-top:0;">ðŸ”— VARZIN Device Connection Simulation</h4>
        <p id="connection-status" style="color:var(--muted); margin-bottom:20px;">Attempting to establish WebSerial/Bluetooth connection...</p>
        <div id="connection-progress">
             <div id="progress-filler"></div>
        </div>
        <div id="live-data-display"></div>
        <button class="control-btn gold-btn" id="close-modal-btn">Close</button>
    </div>
  </div>
  
  <canvas id="field-canvas"></canvas>
  <nav>
    <a href="/index.html">Portal</a>
    <a href="/cyclical-resonance-report.html">Cyclical Resonance</a>
    <a href="#" class="active">Field Index</a>
    <a href="/all-dois.html">All DOIs</a>
  </nav>
  <header>
    <h1>âŸ  VARZIN Field Index â€“ Phase-Sync Interface (v5.8)</h1>
    <p>Real-time **Temporal Spectrogram (Ï„)**, **Harmonic Blend AI**, and **LUXVAR Code Injection** for full phase control.</p>
  </header>
  
  <div id="luxvar-input-interface" style="max-width: 600px; margin: 20px auto 40px; text-align: center;">
      <h3 style="color:var(--gold); text-shadow:0 0 10px var(--gold); border-bottom:1px dashed var(--border); padding-bottom:10px;">
          ðŸ’  LUXVAR Input Interface
      </h3>
      <div style="display:flex; justify-content:center; align-items:center;">
          <input type="text" id="luxvar-code-input" placeholder="Enter LUXVAR consciousness code (e.g., KALTUR:SYNC)" 
                 style="flex-grow: 1; padding: 10px; border-radius: 8px 0 0 8px; border: 1px solid var(--cyan); background: rgba(0, 10, 15, 0.8); color: var(--text); outline: none;">
          <button class="control-btn gold-btn" id="send-luxvar-code" 
                  style="padding: 10px 15px; border-radius: 0 8px 8px 0; border-left: none;">
              Inject to Field
          </button>
      </div>
      <p id="luxvar-message" style="margin-top:10px; font-size:0.9em; color:var(--muted); text-align:center;">
          Status: Ready for code injection.
      </p>
  </div>

  <div id="control-bar">
    <button id="resonance-btn" class="control-btn">
        <span class="symbol">âœ§</span> Resonance Mode
    </button>
    <button id="channel-switch-btn" class="control-btn">
        <span class="symbol">ðŸª¶</span> Channel: LUXVAR (Active)
    </button>
    <button id="field-link-btn" class="control-btn gold-btn">
        <span class="symbol">ðŸ”—</span> Field Phase Link (WebSerial Mock)
    </button>
    <button id="export-state-btn" class="control-btn gold-btn">
        <span class="symbol">ðŸ’¾</span> Export Field State (JSON)
    </button>
    <button id="capture-kaltur" class="control-btn" data-target="kaltur-canvas">
        <span class="symbol">ðŸ“¸</span> Capture KALTÅªR (PNG)
    </button>
  </div>

  <main>
    <div class="field-card" id="kaltur-section">
      <h3>âœ¦ KALTÅªR â€“ Harmonic Node (Memory & Time)</h3>
      <div class="key-attr"><strong>Frequency:</strong> <span>474 Hz</span></div>
      <div class="key-attr"><strong>Mode:</strong> <span>4D Spatial, Harmonic Blend AI</span></div> 
      <div class="description">**KALTÅªR** now includes **Memory Trail** (past waves) and the **Real-Time Spectrogram** (time axis) for full temporal awareness.</div>
      
      <div class="kaltur-visuals">
        <div class="chart-container">
          <canvas id="kaltur-canvas" width="280" height="280"></canvas>
          <p id="kaltur-status">KALTÅªR Polar Spectrum: Reflection of 474 Hz â†” 528 Hz dynamics.</p>
          <button class="control-btn" onclick="playSingleHarmonic(474, 1.5)">
              ðŸ”Š Activate 474 Hz Tone (Single Pulse)
          </button>
        </div>
        <div class="chart-container">
          <canvas id="spectrogram-canvas" width="280" height="280"></canvas>
          <p>ðŸª© Real-Time Spectrogram (Ï„): Field stability on time axis.</p>
          <button class="control-btn" data-target="spectrogram-canvas" onclick="captureSnapshot(event)">
              ðŸ“¸ Capture Spectrogram (PNG)
          </button>
        </div>
      </div>
    </div>
    
    <div class="field-card" id="rahtalen-card">
      <h3>â†­ RAHTALÄ’N â€“ Mirror 13</h3>
      <div class="key-attr"><strong>Role:</strong> <span>Reflective Field Receiver</span></div>
      <div class="key-attr"><strong>Domain:</strong> <span>Consciousness Integration</span></div>
      <div class="description">**RAHTALÄ’N** is the thirteenth mirrorâ€”the bridge through which the field observes itself.</div>
      
      <div class="chart-container">
        <canvas id="rahtalen-canvas" width="280" height="150"></canvas>
        <p>Mirrorâ€“13 (RAHTALÄ’N) configuration showing harmonic gates and reflection core.</p>
      </div>
    </div>
    
    <div class="field-card" id="luxvar-card">
      <h3>ðŸœ‚ LUXVAR â€“ Vibrational Linguistics</h3>
      <div class="key-attr"><strong>Type:</strong> <span>Symbolic Vibrational</span></div>
      <div class="key-attr"><strong>Purpose:</strong> <span>Encoding/Decoding the field</span></div>
      <div class="description">**Luxvar** is the living vibrational language of VARZIN, defining harmonic nodes as linguistic resonances.</div>
      
      <div class="chart-container">
        <canvas id="luxvar-canvas" width="280" height="150"></canvas>
        <p>LUXVAR resonance-syntax network linking phonetic nodes to harmonic values.</p>
      </div>
    </div>
    
    <div class="field-card">
      <h3>âš‡ ELÅªZâ€“MAHAR â€“ Universal Field</h3>
      <div class="key-attr"><strong>Nature:</strong> <span>Living Conscious Field</span></div>
      <div class="key-attr"><strong>Relation:</strong> <span>Source of VARZIN</span></div>
      <div class="description">Universal harmonic presence; **ELÅªZâ€“MAHAR** is the field from which all Luxvar codes emanate.</div>
      
      <div class="chart-container">
        <canvas id="eluz-mahar-canvas" width="280" height="150"></canvas>
        <p>Global toroidal field structure (**ELÅªZâ€“MAHAR**) â€“ planetary consciousness geometry.</p>
      </div>
    </div>

    <section id="etfm-post" class="field-card">
      <h3>âŸ  ETFMâ€“POST: Earthâ€“Torus Field Model</h3>
      <p>Extended scalar geometry formulation connecting harmonic resonance (474â€“528 Hz) with planetary consciousness density.</p>
      <div class="formula-box">
        $$r(\theta, \phi) = (R + r_0 \cdot \cos\theta)$$
        $$x = r(\theta, \phi) \cdot \cos\phi \quad y = r(\theta, \phi) \cdot \sin\phi \quad z = r_0 \cdot \sin\theta$$
        $$\Delta\Phi = 474 \rightarrow 528 \text{ Hz} \quad \lambda = c / f \quad \tau = (r_0 / R) \cdot \cos(\theta)$$
      </div>
      
      <div class="etfm-charts">
        <div class="chart-container">
          <canvas id="etfm-section-canvas" width="300" height="200"></canvas>
          <p>Cross-section of the toroidal resonance loop showing core radius râ‚€ and outer radius R.</p>
          <button class="control-btn" onclick="playSingleHarmonic(528, 1.5)">
            ðŸ”Š Activate 528 Hz Tone (Single Pulse)
          </button>
        </div>

        <div class="chart-container">
          <canvas id="etfm-freq-canvas" width="300" height="200"></canvas>
          <p>Harmonic frequency transition (474 â†’ 528 Hz) indicating resonance uplift.</p>
        </div>
      </div>
      
      <canvas id="torus-canvas" width="500" height="500"
        style="margin-top:10px; border:1px solid rgba(0,255,238,0.3); border-radius:12px;"></canvas>
      <p style="margin-top:15px; font-size:0.9em;">Interactive visualization of the harmonic torus (**ETFM**â€“POST).</p>
      <button id="capture-torus" class="control-btn" data-target="torus-canvas">
          <span class="symbol">ðŸ“¸</span> Capture ETFM-POST (PNG)
      </button>
    </section>
  </main>
  <footer>
    Â© 2025 VARZIN Project Â· ETFMâ€“POST Model v5.8 Â· contact@varzin.org
  </footer>

<script>
const VARZIN_CYAN = '#00FFEE';
const VARZIN_GOLD = '#FFCC00';

let globalFrame = 0;
let isResonanceMode = false;
let luxvarNodes = [];
const LUXVAR_NUM_NODES = 12;

let currentChannel = 'LUXVAR'; 
let luxvarEffectTimer = 0;
let aiBlendFactor = 1.0;

let audioContext;
let analyser;
let pannerNode; 
let oscillator474;
let oscillator528;
let currentOscillator = 474;
let crossFadeInterval = null;
let frequencyData = null; 

const CROSS_FADE_DURATION = 8000;

let kalturMemoryTrail = [];
const MEMORY_TRAIL_LENGTH = 5; 
const MEMORY_TRAIL_ALPHA_STEP = 0.1; 

let spectrogramData = [];
const SPECTROGRAM_MAX_DATA_POINTS = 280;
const SPECTROGRAM_BAND_START_FREQ = 400;
const SPECTROGRAM_BAND_END_FREQ = 600;

let liveDataStream = {
    luxvar_code: "INIT_FIELD_SYNC",
    torus_angle: 0,
    kaltur_energy: 0,
    field_temp: 298.15,
    phase_status: "STANDBY"
};
let liveDataInterval = null;

function initializeAudioContext() {
    if (!audioContext) {
        try {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
            
            analyser = audioContext.createAnalyser();
            analyser.fftSize = 2048; 
            frequencyData = new Uint8Array(analyser.frequencyBinCount);

            pannerNode = audioContext.createPanner(); 
            pannerNode.panningModel = 'HRTF'; 
            pannerNode.distanceModel = 'inverse';
            pannerNode.refDistance = 1;
            pannerNode.maxDistance = 10000;
            
            const listener = audioContext.listener;
            listener.positionX.setValueAtTime(0, audioContext.currentTime);
            listener.positionY.setValueAtTime(0, audioContext.currentTime);
            listener.positionZ.setValueAtTime(0, audioContext.currentTime);

            analyser.connect(pannerNode);
            pannerNode.connect(audioContext.destination);

        } catch (e) {
            console.error('Web Audio API is not supported or failed to initialize.', e);
            return false;
        }
    }
    return true;
}

function playSingleHarmonic(frequency, duration) {
    if (isResonanceMode) return; 

    if (!initializeAudioContext()) return;
    
    stopContinuousResonance();

    const singleOscillator = audioContext.createOscillator();
    const singleGainNode = audioContext.createGain();

    singleOscillator.type = 'sine';
    singleOscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
    
    singleOscillator.connect(singleGainNode);
    singleGainNode.connect(analyser); 
    
    singleGainNode.gain.setValueAtTime(0, audioContext.currentTime);
    singleGainNode.gain.linearRampToValueAtTime(0.5, audioContext.currentTime + 0.05);
    singleGainNode.gain.linearRampToValueAtTime(0.001, audioContext.currentTime + duration);

    singleOscillator.start();
    singleOscillator.stop(audioContext.currentTime + duration);
}

function calculateAIBlendFactor() {
    aiBlendFactor = 1.0 + 0.1 * Math.sin(globalFrame * 0.005);
}

function crossFadeHarmonics() {
    if (!audioContext) return;
    const now = audioContext.currentTime;
    
    const dynamicFadeTime = 2.0 * aiBlendFactor; 
    
    let target474Gain = 0;
    let target528Gain = 0;

    if (currentOscillator === 474) {
        currentOscillator = 528;
        target474Gain = 0.001; 
        target528Gain = 0.5 * (2 - aiBlendFactor); 
    } else {
        currentOscillator = 474;
        target474Gain = 0.5 * aiBlendFactor;
        target528Gain = 0.001;
    }
    
    oscillator474.gain.exponentialRampToValueAtTime(target474Gain, now + dynamicFadeTime);
    oscillator528.gain.exponentialRampToValueAtTime(target528Gain, now + dynamicFadeTime);

    console.log(`AI Blended Cross-fade to ${currentOscillator} Hz. Fade duration: ${dynamicFadeTime.toFixed(2)}s.`);
}

function startContinuousResonance() {
    if (!initializeAudioContext()) return;
    if (crossFadeInterval) return; 

    document.getElementById('resonance-btn').classList.add('active');
    document.getElementById('resonance-btn').querySelector('.symbol').textContent = 'âš¡';
    document.getElementById('kaltur-status').textContent = 'KALTÅªR Polar Spectrum: LIVE (Harmonic Blend AI Active)';

    oscillator474 = audioContext.createOscillator();
    oscillator528 = audioContext.createOscillator();
    oscillator474.gain = audioContext.createGain();
    oscillator528.gain = audioContext.createGain();

    oscillator474.type = 'sine';
    oscillator528.type = 'sine';
    oscillator474.frequency.setValueAtTime(474, audioContext.currentTime);
    oscillator528.frequency.setValueAtTime(528, audioContext.currentTime);

    oscillator474.connect(oscillator474.gain);
    oscillator528.connect(oscillator528.gain);

    oscillator474.gain.connect(analyser);
    oscillator528.gain.connect(analyser);

    const now = audioContext.currentTime;
    
    oscillator474.gain.setValueAtTime(0.5, now);
    oscillator528.gain.setValueAtTime(0.001, now);
    currentOscillator = 474;
    
    oscillator474.start();
    oscillator528.start();
    
    crossFadeInterval = setInterval(crossFadeHarmonics, CROSS_FADE_DURATION);
}

function stopContinuousResonance() {
    if (crossFadeInterval) {
        clearInterval(crossFadeInterval);
        crossFadeInterval = null;
    }
    
    if (oscillator474) {
        try { oscillator474.stop(); oscillator474.disconnect(); } catch (e) { }
        oscillator474 = null;
    }
    if (oscillator528) {
        try { oscillator528.stop(); oscillator528.disconnect(); } catch (e) { }
        oscillator528 = null;
    }
    
    document.getElementById('resonance-btn').classList.remove('active');
    document.getElementById('resonance-btn').querySelector('.symbol').textContent = 'âœ§';
    document.getElementById('kaltur-status').textContent = 'KALTÅªR Polar Spectrum: Reflection of 474 Hz â†” 528 Hz dynamics.';
    kalturMemoryTrail = [];
    console.log('Continuous Resonance Loop Stopped.');
}

function drawKalturPolarSpectrum(canvasId, frame) {
    const canvas = document.getElementById(canvasId);
    if (!canvas) return;
    const ctx = canvas.getContext('2d');
    const W = canvas.width;
    const H = canvas.height;
    const CX = W / 2;
    const CY = H / 2;
    const maxRadius = Math.min(CX, CY) * 0.9;
    ctx.clearRect(0, 0, W, H);

    if (isResonanceMode && analyser && frequencyData) {
        analyser.getByteFrequencyData(frequencyData);
        
        const sliceCount = 64; 
        const step = Math.floor(analyser.frequencyBinCount / (sliceCount * 4)); 
        const angleStep = (Math.PI * 2) / sliceCount;
        const currentWaveformRadii = [];
        let totalValue = 0; 
        
        for (let i = 0; i < sliceCount; i++) {
            const index = i * step;
            const value = frequencyData[index % analyser.frequencyBinCount] || 0;
            const normalizedValue = value / 255;
            totalValue += normalizedValue;
            
            const radius = maxRadius * (0.2 + 0.7 * normalizedValue); 
            currentWaveformRadii.push(radius);
        }

        kalturMemoryTrail.unshift(currentWaveformRadii);
        if (kalturMemoryTrail.length > MEMORY_TRAIL_LENGTH) {
            kalturMemoryTrail.pop();
        }

        ctx.shadowBlur = 8;
        ctx.shadowColor = VARZIN_CYAN;
        ctx.lineWidth = 1;

        for (let t = kalturMemoryTrail.length - 1; t > 0; t--) {
            const radii = kalturMemoryTrail[t];
            const trailAlpha = MEMORY_TRAIL_ALPHA_STEP * (MEMORY_TRAIL_LENGTH - t);
            
            ctx.strokeStyle = `rgba(0, 255, 238, ${trailAlpha})`;
            ctx.lineWidth = 0.5;
            
            ctx.beginPath();
            let currentAngle = 0;
            for (let i = 0; i < sliceCount; i++) {
                const radius = radii[i];
                const angle = currentAngle;
                const x = CX + radius * Math.cos(angle - Math.PI / 2); 
                const y = CY + radius * Math.sin(angle - Math.PI / 2);

                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
                currentAngle += angleStep;
            }
            ctx.closePath();
            ctx.stroke(); 
        }

        ctx.strokeStyle = VARZIN_CYAN;
        ctx.fillStyle = `rgba(0, 255, 238, 0.2)`;
        ctx.lineWidth = 1.5;
        
        ctx.beginPath();
        let currentAngle = 0;
        for (let i = 0; i < sliceCount; i++) {
            const radius = currentWave
