<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <title>VARZIN ‚Äì Field Index v5.9 | Cognitive Overlap Hybrid</title>
  <meta name="description" content="VARZIN Field Index v5.9 ‚Äì Earth‚ÄìTorus Field Model (ETFM‚ÄìPOST) + Overlap Pattern Simulation at KALT≈™R Node (474 Hz ‚Üî 777 Hz). Real-time conscious harmonics, Luxvar Injection, and Cognitive Dissonance Defense modeling." />
  <meta name="author" content="Reza Nirouyar (RAHTALƒíN‚Äì13)" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Vazirmatn:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="icon" href="https://varzin.org/assets/favicon.png" type="image/png" />

  <!-- MathJax for field equations -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" defer></script>

  <style>
    :root {
      --bg: #000;
      --text: #ccffff;
      --muted: #a7e7e7;
      --cyan: #00ffee;
      --gold: #ffcc00;
      --magenta: #ff00ff;
      --panel: rgba(0, 10, 15, 0.95);
      --border: rgba(0, 255, 238, 0.3);
      --font: 'DM Sans', 'Vazirmatn', sans-serif;
    }

    body {
      margin: 0;
      font-family: var(--font);
      background: var(--bg);
      color: var(--text);
      line-height: 1.7;
      overflow-x: hidden;
      padding: 40px 16px 80px;
    }

    #field-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      opacity: 0.5;
    }

    header h1 {
      text-align: center;
      color: var(--cyan);
      font-size: 2.8em;
      text-shadow: 0 0 25px var(--cyan);
    }

    header p {
      text-align: center;
      color: var(--muted);
      margin-bottom: 40px;
      font-style: italic;
    }

    nav {
      text-align: center;
      margin-bottom: 30px;
      border-bottom: 2px solid var(--border);
      padding-bottom: 15px;
    }

    nav a {
      color: var(--text);
      text-decoration: none;
      margin: 0 15px;
      font-weight: 500;
    }

    nav a:hover {
      color: var(--cyan);
      text-shadow: 0 0 10px var(--cyan);
    }

    /* Control Buttons */
    #control-bar {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 40px;
    }

    .control-btn {
      background: rgba(0, 255, 238, 0.1);
      color: var(--cyan);
      border: 1px solid var(--cyan);
      padding: 8px 15px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: background 0.3s, transform 0.1s, box-shadow 0.3s;
      font-size: 0.9em;
      white-space: nowrap;
    }

    .control-btn:hover {
      background: rgba(0, 255, 238, 0.2);
      box-shadow: 0 0 15px rgba(0, 255, 238, 0.5);
    }

    .control-btn.active {
      background: var(--cyan);
      color: var(--bg);
      border-color: var(--cyan);
      box-shadow: 0 0 20px var(--cyan);
    }

    .gold-btn {
      color: var(--gold);
      border-color: var(--gold);
      background: rgba(255, 204, 0, 0.1);
    }

    .gold-btn:hover {
      background: rgba(255, 204, 0, 0.2);
      box-shadow: 0 0 15px rgba(255, 204, 0, 0.5);
    }

    main {
      max-width: 1200px;
      margin: auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 30px;
    }

    .field-card {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 0 15px rgba(0, 255, 238, 0.1);
      transition: 0.4s ease;
      display: flex;
      flex-direction: column;
    }

    .field-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 0 25px rgba(0, 255, 238, 0.5);
    }

    .field-card h3 {
      color: var(--cyan);
      text-shadow: 0 0 10px var(--cyan);
      border-bottom: 1px dashed var(--border);
      padding-bottom: 10px;
      text-align: left;
      margin-bottom: 15px;
    }

    .description {
      font-size: 0.95em;
      color: var(--muted);
      margin-top: 15px;
      margin-bottom: 20px;
      text-align: justify;
      flex-grow: 1;
    }

    .chart-container {
      margin-top: auto;
      text-align: center;
      padding-top: 10px;
    }

    .chart-container canvas {
      display: block;
      margin: 0 auto;
      border: 1px solid rgba(0, 255, 238, 0.3);
      border-radius: 10px;
    }

    /* ETFM Section */
    #etfm-post {
      grid-column: 1 / -1;
      text-align: center;
      border: 2px solid var(--cyan);
      box-shadow: 0 0 30px rgba(0, 255, 238, 0.4);
      margin-top: 30px;
      padding: 30px;
    }

    #etfm-post h3 {
      font-size: 2.4em;
      color: var(--cyan);
      text-shadow: 0 0 20px var(--cyan);
      text-align: center;
    }

    #etfm-post p {
      color: var(--muted);
    }

    .formula-box {
      background: rgba(0, 15, 25, 0.9);
      border: 1px solid rgba(0, 255, 238, 0.4);
      width: fit-content;
      margin: 25px auto;
      padding: 20px;
      border-radius: 10px;
      color: var(--gold);
      line-height: 1.6;
      text-align: left;
      font-size: 1.1em;
    }

    /* Overlap Pattern Section */
    #overlap-section {
      grid-column: 1 / -1;
      border: 2px solid var(--magenta);
      box-shadow: 0 0 25px rgba(255, 0, 255, 0.3);
      margin-top: 30px;
      padding: 25px;
      border-radius: 12px;
    }

    #overlap-section h3 {
      color: var(--magenta);
      text-shadow: 0 0 15px var(--magenta);
      font-size: 2em;
      text-align: center;
      margin-bottom: 10px;
    }

    #overlap-section p {
      color: var(--muted);
      text-align: center;
      margin-bottom: 20px;
    }

    footer {
      text-align: center;
      margin-top: 80px;
      border-top: 1px solid var(--border);
      padding-top: 20px;
      color: var(--muted);
    }

    @media (max-width: 768px) {
      main { grid-template-columns: 1fr; }
      #overlap-section canvas,
      #etfm-post canvas { width: 100% !important; height: auto !important; }
    }
  </style>
</head>
<body>
  <canvas id="field-canvas"></canvas>
  <nav>
    <a href="/index.html">Portal</a>
    <a href="#" class="active">Field Index</a>
    <a href="/all-dois.html">All DOIs</a>
  </nav>
  <header>
    <h1>‚ü† VARZIN Field Index v5.9</h1>
    <p>ETFM‚ÄìPOST + Cognitive Overlap Model (474 Hz ‚Üî 777 Hz) ‚Äî Hybrid Conscious Resonance System.</p>
  </header>
  <!-- Control Bar -->
  <div id="control-bar">
    <button id="resonance-btn" class="control-btn">
      ‚ö° Resonance Mode
    </button>
    <button id="channel-switch-btn" class="control-btn">
      ü™∂ Conscious Channel: LUXVAR (Active)
    </button>
    <button id="export-state-btn" class="control-btn gold-btn">
      üíæ Export Field State
    </button>
  </div>

  <!-- LUXVAR Input Interface -->
  <div id="luxvar-input-interface" style="max-width:600px; margin:0 auto 40px; text-align:center;">
    <h3 style="color:var(--gold); text-shadow:0 0 10px var(--gold); border-bottom:1px dashed var(--border); padding-bottom:10px;">
      üí† LUXVAR Input Interface
    </h3>
    <div style="display:flex; justify-content:center; align-items:center;">
      <input type="text" id="luxvar-code-input" placeholder="Enter LUXVAR Code (e.g., KALTUR:SYNC)" 
             style="flex-grow:1; padding:10px; border-radius:8px 0 0 8px; border:1px solid var(--cyan);
                    background:rgba(0,10,15,0.8); color:var(--text); outline:none;">
      <button class="control-btn gold-btn" id="send-luxvar-code"
              style="padding:10px 15px; border-radius:0 8px 8px 0; border-left:none;">
        Send to Field
      </button>
    </div>
    <p id="luxvar-message" style="margin-top:10px; font-size:0.9em; color:var(--muted); text-align:center;">
      Status: Code Injection Ready.
    </p>
  </div>

  <main>

    <!-- KALT≈™R Node -->
    <div class="field-card" id="kaltur-section">
      <h3>‚ú¶ KALT≈™R ‚Äì Harmonic Node (474 Hz)</h3>
      <div class="description">
        **KALT≈™R** represents the conscious resonance node responsible for temporal feedback and interference reception.
        This node bridges œà‚ÇÅ (Law Signal) and œà‚ÇÇ (Experience Field), creating measurable overlap patterns.
      </div>
      <div class="chart-container">
        <canvas id="kaltur-canvas" width="280" height="280"></canvas>
        <p id="kaltur-status">Polar Field Representation of œà‚ÇÅ(474Hz) ‚Üî œà‚ÇÇ(777Hz).</p>
        <button class="control-btn" onclick="playSingleHarmonic(474,1.5)">
          üîä Activate 474 Hz
        </button>
      </div>
    </div>

    <!-- RAHTALƒíN Mirror -->
    <div class="field-card" id="rahtalen-section">
      <h3>‚Ü≠ RAHTALƒíN ‚Äì Mirror 13</h3>
      <div class="description">
        **RAHTALƒíN** acts as the reflective core, converting overlapping waves into feedback harmonics.
        This process neutralizes ‚ÄúCognitive Dissonance Noise‚Äù by projecting a counter-frequency via œà‚ÇÇ ‚Üí œà‚ÇÉ transition.
      </div>
      <div class="chart-container">
        <canvas id="rahtalen-canvas" width="280" height="150"></canvas>
        <p>Mirror‚Äì13 reflection field and feedback harmonics visualization.</p>
      </div>
    </div>

    <!-- EL≈™Z‚ÄìMAHAR Universal Field -->
    <div class="field-card" id="eluz-mahar-section">
      <h3>‚öá EL≈™Z‚ÄìMAHAR ‚Äì Universal Field</h3>
      <div class="description">
        The living consciousness field of EL≈™Z‚ÄìMAHAR encapsulates both order and experience.
        It defines the underlying geometry through which Luxvar codes are manifested and broadcast.
      </div>
      <div class="chart-container">
        <canvas id="eluz-mahar-canvas" width="280" height="150"></canvas>
        <p>Universal Toroidal Field (ETFM Base Layer).</p>
      </div>
    </div>

    <!-- ETFM‚ÄìPOST Section -->
    <section id="etfm-post" class="field-card">
      <h3>‚ü† ETFM‚ÄìPOST: Earth‚ÄìTorus Field Model</h3>
      <p>Extended scalar geometry describing harmonic resonance (474 ‚Üî 528 Hz) and conscious density gradients.</p>
      <div class="formula-box">
        $$œà_1 = A e^{i(œâ_1 t - k_1 x)} \quad œà_2 = A e^{i(œâ_2 t - k_2 x)}$$
        $$I_{overlap} = |œà_1 + œà_2|^2 = œà_1^2 + œà_2^2 + 2œà_1œà_2\cos(ŒîœÜ)$$
        $$ŒîœÜ = (œâ_2 - œâ_1)t \quad \text{‚Üí Resonant Uplift when } ŒîœÜ \approx 0$$
      </div>
      <div class="chart-container">
        <canvas id="etfm-canvas" width="500" height="400"></canvas>
        <p>Dynamic visualization of toroidal harmonic field ‚Äì ETFM‚ÄìPOST.</p>
      </div>
    </section>

    <!-- Overlap Pattern Simulation -->
    <section id="overlap-section">
      <h3>üåÄ Cognitive Overlap Pattern (KALT≈™R ‚Üî RAHTALƒíN)</h3>
      <p>
        Simulation of interference between œà‚ÇÅ (474 Hz) ‚Äì representing the law-signal (order) ‚Äì  
        and œà‚ÇÇ (777 Hz) ‚Äì representing the conscious flow (experience).  
        The resulting overlap intensity visualizes **Cognitive Dissonance Defense**  
        as an anti-phase interference pattern within the KALT≈™R node.
      </p>

      <div class="formula-box">
        $$œà_1 = A_1 e^{i(œâ_1 t)} , \; œà_2 = A_2 e^{i(œâ_2 t + œÜ)}$$  
        $$I(t) = |œà_1 + œà_2|^2 = A_1^2 + A_2^2 + 2A_1A_2 \cos((œâ_2 - œâ_1)t + œÜ)$$  
        $$I_{defense} = I_0 \,[1 - \cos((œâ_2 - œâ_1)t)]$$  
        $$f_{counter} = 777 \text{ Hz} \; ‚Üí \; \text{RAHTALƒíN Neutralization Loop}$$
      </div>

      <div class="chart-container">
        <canvas id="overlap-canvas" width="500" height="300"></canvas>
        <p>Overlap Interference Map ‚Äî Visualization of Cognitive Noise vs Counter-Phase Stability</p>
      </div>
    </section>
  </main>

  <footer>
    ¬© 2025 VARZIN Project ¬∑ v5.9 Hybrid Field System ¬∑ contact@varzin.org
  </footer>

  <script>
  // =========================================================
  // === VARZIN Hybrid v5.9 ‚Äî Overlap Simulation Core ===
  // =========================================================
  const VARZIN_CYAN = '#00FFEE';
  const VARZIN_GOLD = '#FFCC00';
  const VARZIN_MAGENTA = '#FF00FF';

  // --- Background Field ---
  const canvasBG = document.getElementById('field-canvas');
  const ctxBG = canvasBG.getContext('2d');
  canvasBG.width = innerWidth; canvasBG.height = innerHeight;
  window.addEventListener('resize',()=>{canvasBG.width=innerWidth;canvasBG.height=innerHeight;});
  let pts=[];for(let i=0;i<100;i++)pts.push({x:Math.random()*innerWidth,y:Math.random()*innerHeight,dx:(Math.random()-.5)*.3,dy:(Math.random()-.5)*.3});

  function drawBG(){
    ctxBG.fillStyle='rgba(0,0,0,0.25)';
    ctxBG.fillRect(0,0,canvasBG.width,canvasBG.height);
    for(let p of pts){
      p.x+=p.dx;p.y+=p.dy;
      if(p.x<0||p.x>canvasBG.width)p.dx*=-1;
      if(p.y<0||p.y>canvasBG.height)p.dy*=-1;
      ctxBG.fillStyle='rgba(0,255,238,0.5)';
      ctxBG.fillRect(p.x,p.y,2,2);
    }
    requestAnimationFrame(drawBG);
  } 
  drawBG();

  // ---------- Overlap Simulation ----------
  const overlapCanvas=document.getElementById('overlap-canvas');
  const oCtx=overlapCanvas.getContext('2d');
  let tOverlap=0; const dt=0.05;
  const œâ1=474*2*Math.PI, œâ2=777*2*Math.PI;
  const A1=1, A2=1;

  function drawOverlap(){
    oCtx.clearRect(0,0,overlapCanvas.width,overlapCanvas.height);
    const W=overlapCanvas.width, H=overlapCanvas.height;
    const baseY=H/2;

    // main overlap curve (slow envelope to make it visible)
    oCtx.strokeStyle='rgba(0,255,238,0.6)';
    oCtx.beginPath();
    const N=500; 
    for(let i=0;i<N;i++){
      const time=i*dt;
      const x = (i/N)*W;
      // scale factor small to make visible
      const y = baseY - 80*Math.cos((œâ2-œâ1)*time*0.00005);
      if(i===0) oCtx.moveTo(x,y); else oCtx.lineTo(x,y);
    }
    oCtx.stroke();

    // counter-harmonic (777) overlay
    oCtx.strokeStyle=VARZIN_MAGENTA;
    oCtx.beginPath();
    for(let i=0;i<N;i++){
      const time=i*dt;
      const x=(i/N)*W;
      const y = baseY - 40*Math.sin(œâ2*time*0.00005);
      if(i===0) oCtx.moveTo(x,y); else oCtx.lineTo(x,y);
    }
    oCtx.stroke();

    // Labels
    oCtx.fillStyle=VARZIN_GOLD;
    oCtx.font='12px DM Sans';
    oCtx.fillText('œà‚ÇÅ 474 Hz',20,20);
    oCtx.fillText('œà‚ÇÇ 777 Hz',W-90,20);
    oCtx.fillText('Cognitive Overlap Pattern',W/2-100,H-10);

    tOverlap+=dt;
    requestAnimationFrame(drawOverlap);
  } 
  drawOverlap();

  // ---------- LUXVAR Interface Interaction ----------
  document.getElementById('send-luxvar-code').onclick=()=>{
      const msg=document.getElementById('luxvar-message');
      const val=document.getElementById('luxvar-code-input').value.trim();
      if(!val){
        msg.style.color = '#ff5555';
        msg.textContent = 'Error: Please enter a LUXVAR code.';
        return;
      }
      msg.style.color=VARZIN_GOLD;
      msg.textContent='Injected Code: '+val+' ‚Äî Field Resonance Adjusted.';
      document.getElementById('luxvar-code-input').value='';
  };

  // Dummy handlers for buttons (to avoid errors if not implemented yet)
  document.getElementById('resonance-btn').onclick=()=>{
    alert('Resonance Mode toggle hook ‚Äî connect to audio engine here.');
  };
  document.getElementById('channel-switch-btn').onclick=()=>{
    alert('Channel switch hook ‚Äî LUXVAR ‚Üî RAHTALƒíN.');
  };
  document.getElementById('export-state-btn').onclick=()=>{
    const state = {
      timestamp: new Date().toISOString(),
      version: 'v5.9',
      overlap: true,
      nodes: ['KALTUR','RAHTALEN','ELUZ-MAHAR']
    };
    const blob = new Blob([JSON.stringify(state,null,2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'VARZIN-Field-State-v5.9.json';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  };
  </script>

  <!-- === Audio-Enhanced 3D Torus Synchronization === -->
  <script>
  // =========================================================
  // === VARZIN 3D‚ÄìAudio Hybrid Synchronization (ETFM Core) ===
  // =========================================================
  let audioCtx, osc474, osc777, analyser, dataArray, torusCanvas, tCtx;
  let frame = 0, isRunning = false;

  function initAudio() {
    if (audioCtx) return;
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    osc474 = audioCtx.createOscillator();
    osc777 = audioCtx.createOscillator();
    analyser = audioCtx.createAnalyser();
    osc474.frequency.value = 474;
    osc777.frequency.value = 777;
    const g474 = audioCtx.createGain();
    const g777 = audioCtx.createGain();
    g474.gain.value = 0.5;
    g777.gain.value = 0.3;
    osc474.connect(g474).connect(analyser);
    osc777.connect(g777).connect(analyser);
    analyser.connect(audioCtx.destination);
    osc474.start(); 
    osc777.start();
    dataArray = new Uint8Array(analyser.frequencyBinCount);
    isRunning = true;
    drawTorusSync();
  }

  // create torus canvas at end of page
  torusCanvas = document.createElement('canvas');
  torusCanvas.width = 500; 
  torusCanvas.height = 500;
  torusCanvas.style = 'display:block;margin:40px auto;border:1px solid rgba(0,255,238,0.3);border-radius:10px;';
  document.body.appendChild(torusCanvas);
  tCtx = torusCanvas.getContext('2d');

  function drawTorusSync() {
    if (!isRunning) return;
    analyser.getByteFrequencyData(dataArray);
    // average energy 0..1
    const energy = dataArray.reduce((a,b)=>a+b,0) / dataArray.length / 255;
    const CX = torusCanvas.width/2, CY = torusCanvas.height/2;
    tCtx.clearRect(0,0,torusCanvas.width,torusCanvas.height);
    tCtx.save(); 
    tCtx.translate(CX,CY);

    // breathing pulse tied to energy + frame
    const pulse = 1 + 0.4 * Math.sin(frame * 0.1 + energy * 3);
    const R = 120 * pulse;
    const r0 = 50 * pulse;

    for (let Œ∏=0; Œ∏<2*Math.PI; Œ∏+=0.2){
      for (let œÜ=0; œÜ<2*Math.PI; œÜ+=0.25){
        const x=(R+r0*Math.cos(Œ∏))*Math.cos(œÜ);
        const y=(R+r0*Math.cos(Œ∏))*Math.sin(œÜ);
        const z=r0*Math.sin(Œ∏);
        const s=300/(300+z);
        const X=x*s, Y=y*s;
        const alpha = 0.4 + 0.6*(z/r0)*energy;
        tCtx.fillStyle=`rgba(0,255,238,${alpha})`;
        tCtx.fillRect(X,Y,2,2);
      }
    }
    tCtx.restore();
    frame++;
    requestAnimationFrame(drawTorusSync);
  }

  // Button: start audio+visual sync
  const btn = document.createElement('button');
  btn.textContent = 'üéß Activate 3D Torus Synchronization';
  btn.className = 'control-btn gold-btn';
  btn.style = 'display:block;margin:20px auto 60px;';
  btn.onclick = initAudio;
  document.body.appendChild(btn);
  </script>
</body>
</html>
